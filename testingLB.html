<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testování lightboxu</title>
    <link rel="stylesheet" href="/lightboxTest.css">
</head>
    <body>
        <div id="gallery">
            <noscript>
                <a href="/Postavy/Obrázky/bestie.jpg">Bestie</a>
                <a href="/Postavy/Obrázky/brom.jpg">Brom</a>
                <a href="/Postavy/Obrázky/zuana.jpg">Zuana</a>
            </noscript>
            <img src="/Postavy/Obrázky/bestie.jpg" style="max-width: 120px; max-height: 120px;">
            <img src="/Postavy/Obrázky/brom.jpg" style="max-width: 120px; max-height: 120px;">
            <img src="/Postavy/Obrázky/zuana.jpg" style="max-width: 120px; max-height: 120px;">
        </div>
        <div id="div1">The text above has been created dynamically.</div>
        <div id="div2">Galerie div</div>
        <div class="container" id="Ini">
            
        </div>
        <script>
                function change(item) {
                    item.classList.toggle("change");
                }

                function initiateGall(clickedImg) {
                    if (document.getElementById("Ini").classList.contains("change"))
                    {
                        document.getElementById("modalLightbox").remove();
                        document.getElementById("Ini").innerHTML = "";
                        
                    }
                    else {
                        const newDiv = document.createElement("div");
                        newDiv.setAttribute("id", "modalLightbox");
                       
                        const currentDiv = document.getElementById("gallery");
                        document.body.insertBefore(newDiv, currentDiv);

                        const mainImg = document.createElement("img");
                        mainImg.setAttribute("class", "mainImgClass");
                        mainImg.setAttribute('id', 'imgModalu');

                        if (clickedImg) {
                            mainImg.setAttribute('src', clickedImg.src)
                        }
                       
                        newDiv.appendChild(mainImg);
                        const bar1 = document.createElement("div");
                        bar1.setAttribute("class", "bar1");
                        const bar2 = document.createElement("div");
                        bar2.setAttribute("class", "bar2");
                        const bar3 = document.createElement("div");
                        bar3.setAttribute("class", "bar3");
                        document.getElementById("Ini").appendChild(bar1);
                        document.getElementById("Ini").appendChild(bar2);
                        document.getElementById("Ini").appendChild(bar3);
                    }
                }

                 document.querySelectorAll('#gallery img').forEach(img => {
                    img.addEventListener('click', () => {
                        initiateGall(img);
                        change(document.getElementById('Ini'));
                    });
                });

                document.getElementById('Ini').addEventListener('click', () => {
                        initiateGall();
                        change(document.getElementById('Ini'));
                    });
        </script>
    </body>
</html>